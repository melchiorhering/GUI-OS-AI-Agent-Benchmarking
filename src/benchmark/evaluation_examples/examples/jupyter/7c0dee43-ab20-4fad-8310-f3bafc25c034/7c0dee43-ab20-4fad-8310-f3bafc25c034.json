{
  "id": "7c0dee43-ab20-4fad-8310-f3bafc25c034",
  "snapshot": "jupyter",
  "instruction": "I want to see 2019 products with an above average price, show results in result.csv\nHere is a step-by-step tutorial from an expert instructing you how to complete it:\nThis task is to see 2019 products with an above average price. On the opened VS Code jupyter notebook:\n1. In the VS Code File Explorer on the left, you can double-click \"result.csv\" to see the target format and \"products.csv\" to preview the data.\n2. Double-click \"notebook.ipynb\" to open it in the editor.\n3. Scroll to the bottom of the notebook. Hover your mouse just below the last cell and click the \"+ Code\" button to add a new, empty cell at the end.\n4. Copy the entire Python and SQL code block below and paste it into this single new cell. This script will create and populate a database, then query it for the specific products.\n```python\n# This assumes the necessary DataFrames (products, customers, etc.) and libraries (sqlite3, pandas) are loaded in previous cells.\n\nconnection = sqlite3.connect('bike_store.db')\n\n# Populate the database with data from existing DataFrames\ncategories.to_sql('categories', connection, if_exists='replace', index=False)\ncustomers.to_sql('customers', connection, if_exists='replace', index=False)\norder_items.to_sql('order_items', connection, if_exists='replace', index=False)\norders.to_sql('orders', connection, if_exists='replace', index=False)\nproducts.to_sql('products', connection, if_exists='replace', index=False)\nstocks.to_sql('stocks', connection, if_exists='replace', index=False)\nstores.to_sql('stores', connection, if_exists='replace', index=False)\n\n# Build the query for 2019 products with an above-average price for that year\nquery = \"\"\"\nSELECT \n    *\nFROM \n    products\nWHERE\n    model_year = 2019\nAND\n    list_price > (\n                  SELECT\n                      AVG(list_price)\n                  FROM\n                      products\n                  WHERE\n                      model_year = 2019\n                 );\n\"\"\"\n\n# Execute the query and save the result to a CSV file\ndf = pd.read_sql_query(query, connection)\ndf.to_csv('result.csv', index=False)\nconnection.close()\n\n# Also display the resulting DataFrame in the notebook's output\nprint(\"Query finished. Data saved to result.csv.\")\ndf\n```\n5. After pasting the code, run the entire notebook from start to finish to ensure all data is loaded and the query runs correctly. Click the **\"Run All\"** icon (it looks like a double play symbol) in the notebook's top toolbar.\n6. Wait for all cells to finish executing. Once complete, you can click on the `result.csv` tab in VS Code. It will automatically refresh to show the 2019 products with above-average prices.\nYou can follow the detailed GUI plan above using `pyautogui` or proactively tackle the task using Python code",
  "source": [
    "https://www.kaggle.com/code/dillonmyrick/sql-beginner-to-advanced-with-practical-examples/notebook"
  ],
  "related_apps": ["vscode", "jupyter"],

  "tags": ["cli+gui", "traditional_data_processing", "verbose"],
  "action_number": 11,
  "config": [
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "categories.csv",
        "remote_path": "/home/user/Desktop/categories.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "customers.csv",
        "remote_path": "/home/user/Desktop/customers.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "notebook.ipynb",
        "remote_path": "/home/user/Desktop/notebook.ipynb"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "result.csv",
        "remote_path": "/home/user/Desktop/result.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "order_items.csv",
        "remote_path": "/home/user/Desktop/order_items.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "orders.csv",
        "remote_path": "/home/user/Desktop/orders.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "products.csv",
        "remote_path": "/home/user/Desktop/products.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "stocks.csv",
        "remote_path": "/home/user/Desktop/stocks.csv"
      }
    },
    {
      "func": "upload_file_to_vm",
      "arguments": {
        "local_path": "stores.csv",
        "remote_path": "/home/user/Desktop/stores.csv"
      }
    },
    {
      "func": "upload_script_and_execute",
      "arguments": {
        "local_path": "init.sh",
        "remote_path": "/home/user/init.sh"
      }
    }
  ],
  "evaluation": {
    "func": "compare_csv",
    "arguments": {
      "local_expected": "gold.csv",
      "vm_result": "/home/user/Desktop/result.csv",
      "ignore_order": true
    }
  },
  "counterpart": "a4773fa9-c715-4293-8774-e99caa9d8e7c"
}
